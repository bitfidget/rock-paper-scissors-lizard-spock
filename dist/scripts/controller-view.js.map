{"version":3,"sources":["controller-view.babel.js"],"names":["rps","panel","main","document","getElementById","profile","result","controls","overlay","classes","addCls","el","cls","classList","add","removeCls","remove","clearCls","home","views","signedIn","innerHTML","user","getName","getImageUrl","signedOut","gameNew","gameDoingStuffThatLooksLikeStuffButIsNotReallyStuff","pulses","then","gameResult","history","length","html","me","name","pc","returnResult","shareOptions","prefilltext","returnVerb","gapi","interactivepost","render","contenturl","calltoactionurl","clientid","cookiepolicy","calltoactionlabel","ms","Promise","resolve","reject","setTimeout"],"mappings":"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","file":"controller-view.babel.js","sourcesContent":["\nvar rps = rps || {}\n\n\n// some DOM stuff I don't want to have to do twice\n\nrps.panel = {\n  main : document.getElementById('screen'),\n  profile : document.getElementById('user-profile'),\n  result : document.getElementById('game-result'),\n  controls : document.getElementById('game-control'),\n  overlay : document.getElementById('overlay')\n}\n\n\n// making room to extend the basic add/remove classes incase it's needed\n\nrps.classes = {\n  addCls: function (el, cls) {\n    el.classList.add(cls)\n  },\n  removeCls: function (el, cls) {\n    el.classList.remove(cls)\n  },\n  clearCls: function (el, cls) {\n    el.classList = cls || ''\n  },\n  home: function () {\n    rps.panel.main.classList = \"state-home signed-in\"\n  }\n}\n\n\n// all the main views of the app\n// could neaten this up by doing more hide/show via css or\n// by using a FE framework, but it would increase the load time massively\n// a lot of the game is just switching views\n\nrps.views = {\n  signedIn: function () {\n    rps.panel.profile.innerHTML = `\n      <h6>Welcome back ${rps.user.profile.getName()}</h6>\n      <img src=\"${rps.user.profile.getImageUrl()}\"/>\n      <button onclick=\"rps.user.signOut()\" class=\"tertiary\">Sign out</button>`\n    rps.panel.main.classList.add('signed-in')\n  },\n\n  signedOut: function () {\n    rps.panel.profile.innerHTML = `\n      <p>Please sign in to play</p>`\n    rps.classes.home()\n    rps.panel.main.classList.remove('signed-in')\n  },\n\n  gameNew: function () {\n    rps.classes.clearCls(rps.panel.main, 'state-game')\n  },\n\n  // this was added late in the game as a test user said it was needed\n  gameDoingStuffThatLooksLikeStuffButIsNotReallyStuff: function() {\n\n    rps.panel.overlay.classList.add('overlay')\n\n    // it's not beautiful but it's effective\n    pulses(50)\n    .then(function() {\n      rps.panel.overlay.classList.add('overlay-flash')\n      return pulses(400)\n    })\n    .then(function() {\n      rps.panel.overlay.classList = \"\"\n      return pulses(50)\n    })\n    .then(function() {\n      rps.panel.overlay.classList.add('overlay')\n      return pulses(50)\n    })\n    .then(function() {\n      rps.panel.overlay.classList.add('overlay-flash')\n      return pulses(400)\n    })\n    .then(function() {\n      rps.panel.overlay.classList = \"\"\n      return pulses(50)\n    })\n    .then(function() {\n      rps.panel.overlay.classList.add('overlay')\n      return pulses(50)\n    })\n    .then(function() {\n      rps.panel.overlay.classList.add('overlay-flash')\n      return pulses(400)\n    })\n    .then(function() {\n      rps.panel.overlay.classList = \"\"\n      rps.views.gameResult()\n    })\n  },\n\n  gameResult: function () {\n\n    // grab the last result (we could also grab other results to relive past wins)\n\n    let result = rps.history[rps.history.length - 1]\n\n    // print result\n\n    let html = `\n      <p>you chose ${result.me.name}</p>\n      <p>Spock chose ${result.pc.name}</p>\n      <h1>You ${returnResult(result.me, result.pc)}!</h1>`\n\n    rps.panel.controls.classList.remove('share')\n\n\n    // print extra info if you won or lost\n\n    if (returnResult(result.me, result.pc) === 'win') {\n\n      // share button only if you win\n      rps.panel.controls.classList.add('share')\n      shareOptions.prefilltext = 'I just beat Spock at Rock_Paper_Scissors_Lizard_Spock because ' + result.me.name + ' ' + returnVerb(result.me, result.pc) + ' ' + result.pc.name\n      gapi.interactivepost.render('social-share', shareOptions);\n\n      html += `\n        <h2>${result.me.name}</h2>\n        <h3>${returnVerb(result.me, result.pc)}</h3>\n        <h2>${result.pc.name}</h2>`\n\n    } else if (returnResult(result.me, result.pc) === 'lose') {\n\n      html += `\n        <h2>${result.pc.name}</h2>\n        <h3>${returnVerb(result.me, result.pc)}</h3>\n        <h2>${result.me.name}</h2>`\n    }\n\n    rps.panel.result.innerHTML = html\n    rps.panel.main.classList.add('result')\n  }\n}\n\n\n// for sharing on google +\n\nconst shareOptions = {\n  contenturl: 'https://plus.google.com/pages/',\n  calltoactionurl: 'https://plus.google.com/pages/',\n  clientid: '311755866043-nqbamcbg2kb63k8oo9gpq38iu0s11b4u.apps.googleusercontent.com',\n  cookiepolicy: 'single_host_origin',\n  calltoactionlabel: \"START\",\n}\n\n\n// for the flahsy thing that makes it look like something is happening\n\nconst pulses = ms => new Promise ((resolve, reject) => {\n  setTimeout(resolve, ms)\n})\n\n\n// kick off the app\n\nrps.views.signedOut()\nrps.classes.clearCls(rps.panel.main, 'state-home')"]}